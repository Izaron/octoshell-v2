name,is_enabled,description,src_file,group,priority,confidence,criticalness,suggestion,text_recommendation,module_recommendation,comment
rule_mpi_issues,1,Низкая активность использования вычислительных ресурсов при высокой интенсивности использования MPI сети.,tag_based_conditions.py,inefficient_mpi,1,3,4,"Выполнение MPI операций, вероятно, занимает слишком много времени, требуется оптимизация.",Анализ MPI программ -> Профилировка,mpi_profiling,tag_less_suspicious AND (tag_comm_data OR tag_comm_pckts)
rule_mpi_packets,1,Размер MPI пакетов слишком маленький.,tag_based_conditions.py,inefficient_network_packets,1,3,4,Накладные расходы на передачу MPI сообщений могут быть существенными.,Анализ MPI программ -> Профилировка,mpi_profiling,tag_less_suspicious AND NOT tag_comm_data AND tag_comm_pckts
rule_not_effective,1,"Низкая активность использования всех доступных ресурсов (процессоров, памяти, коммуникационной сети, графических ускорителей).",tag_based_conditions.py,suspicious_and_not_communicative,1,3,4,"Причина низкой эффективности не обнаружена, требуется общий анализ.","1) Анализ динамики выполнения приложения;
2) Общий анализ последовательных программ (если нет MPI);
3) Анализ MPI -> Профилировка (если MPI есть).","execution_dynamics,general_serial_analysis,mpi_profiling",tag_less_suspicious AND (tag_not_comm OR tag_serial OR tag_single) AND NOT tag_data_intensive
rule_bad_mem,1,Низкая активность использования вычислительных ресурсов при высокой интенсивности работы с памятью.,tag_based_conditions.py,suspicious_and_not_communicative,2,2,4,"Работы с памятью, вероятно, занимает слишком много времени, требуется оптимизация.",Анализ работы с памятью -> Эффективность,memory_efficiency,tag_less_suspicious AND (tag_not_comm OR tag_serial OR tag_single) AND tag_data_intensive
rule_bad_locality,1,Низкая активность работы задачи при низкой локальности обращений в память.,tag_based_conditions.py,suspicious_and_not_communicative,2,2,4,"Работы с памятью, вероятно, организована неэффективно, требуется оптимизация.",Анализ работы с памятью -> Эффективность,memory_efficiency,tag_less_suspicious AND (tag_not_comm OR tag_serial OR tag_single) AND (tag_bad_locality OR tag_weird_locality)  
rule_locality,1,Высокая интенсивность работы с памятью при низкой локальности обращений в память.,tag_based_conditions.py,suspicious_and_not_communicative,2,2,3,"Работы с памятью, вероятно, организована неэффективно, требуется оптимизация.",Анализ работы с памятью -> Эффективность,memory_efficiency,tag_data_intensive AND tag_bad_locality
rule_cache,1,Низкая активность работы задачи при высокой интенсивности работы с памятью и низкой локальности обращений в память.,tag_based_conditions.py,suspicious_and_not_communicative,3,3,4,"Работы с памятью, вероятно, занимает слишком много времени и организована неэффективно, требуется оптимизация.",Анализ работы с памятью -> Эффективность,memory_efficiency,tag_less_suspicious AND (tag_not_comm OR tag_serial OR tag_single) AND tag_data_intensive AND (tag_bad_locality OR tag_weird_locality)  
rule_interleave,1,Низкая активность работы задачи при высокой интенсивности работы с памятью и высокой локальности обращений в память.,tag_based_conditions.py,suspicious_and_not_communicative,2,2,4,"Работы с памятью занимает слишком много времени, но организована эффективно. Можно попробовать совмещать обработку данных с остальной работой в задаче (передачей данных или выполнением вычислений).","1) Анализ работы с памятью -> Эффективность»;
2) Статический анализ.","memory_efficiency,static_analysis",tag_less_suspicious AND (tag_not_comm OR tag_serial OR tag_single) AND tag_data_intensive AND tag_good_locality 
rule_normal_serial,1,Последовательная задача,tag_based_conditions.py,serial_like_jobs,1,2,4,Для работы на суперкомпьютере стоит распараллелить данную задачу.,Общий анализ последовательных программ ,general_serial_analysis,tag_serial
rule_cpu_gpu,1,Задача слабо использует CPU при высокой загрузке GPU. ,tag_based_conditions.py,gpu_based,1,2,3,"Можно попробовать одновременно загружать и CPU, и GPU.",Анализ работы с ускорителями,accelerator_analysis,tag_gpu_pure
rule_more_cpu_gpu,1,Задача практически не использует CPU при высокой загрузке GPU.,tag_based_conditions.py,gpu_based,2,3,4,"Можно попробовать одновременно загружать и CPU, и GPU.",Анализ работы с ускорителями,accelerator_analysis,tag_gpu_pure AND tag_less_suspicious 
rule_anomaly,1,Чрезвычайно низкая активность использования всех доступных ресурсов.,integral_based_conditions.py,disaster,1,5,5,Задача работает некорректно или зависла.,Рекомендуется проверить корректность запуска и при необходимости отменить его.,---,Средняя загрузка процессора и средний load average катастрофически низки; загрузка ГПУ также очень низкая. 
rule_disbalance_cpu_la,1,Заметный дисбаланс внутри узлов либо активность сильно отличается на разных узлах.,integral_based_conditions.py,disbalance,1,2,3,Разбалансировка нагрузки внутри узла либо между узлами.,"1) Анализ динамики выполнения приложения;
2) Общий анализ последовательных программ (если нет MPI);
3) Анализ MPI -> Профилировка (если MPI есть).","execution_dynamics,general_serial_analysis,mpi_profiling",max_cpu_user * avg_loadavg  / (avg_cpu_user * 28)
rule_avg_disbalance,0,Интенсивность использования ресурсов сильно отличается на разных узлах.,integral_based_conditions.py,disbalance,1,2,3,Разбалансировка нагрузки между узлами.,"1) Анализ динамики выполнения приложения;
2) Общий анализ последовательных программ (если нет MPI);
3) Анализ MPI -> Профилировка (если MPI есть).","execution_dynamics,general_serial_analysis,mpi_profiling",TODO
rule_node_disbalance,0,"Данные мониторинга сильно отличаются для разных узлов -> скорее всего, имеет место разбалансировка. Правило имеет смысл учитывать, если не сработали более конкретные правила",integral_based_conditions.py,disbalance,1,2,3,Разбалансировка нагрузки между узлами.,"1) Анализ динамики выполнения приложения;
2) Общий анализ последовательных программ (если нет MPI);
3) Анализ MPI -> Профилировка (если MPI есть).","execution_dynamics,general_serial_analysis,mpi_profiling",TODO
rule_mpi_many_operations,0,"Низкая интенсивность использования MPI сети, однако число MPI операций велико.",integral_based_conditions.py,inefficient_mpi,1,2,3,"Вероятно, работа с MPI организована неэффективно.",Анализ MPI программ -> Профилировка,mpi_profiling,TODO
rule_mpi_small_packets,1,Слишком маленькие средние размеры MPI IB пакетов при достаточно высокой интенсивности использования коммуникационной сети.,integral_based_conditions.py,inefficient_network_packets,2,2,3,Накладные расходы на передачу MPI сообщений могут быть существенными.,Анализ MPI программ -> Профилировка (если проблема с MPI сетью),mpi_profiling,"num_nodes > 1 AND NOT thr_low_ib_mpi AND (avg_mpi_xmit_packets < MPI_SMALL_PACKETS OR avg_mpi_rcv_packets < MPI_SMALL_PACKETS)
"
rule_fs_small_packets,1,Слишком маленькие средние размеры ФС IB пакетов при достаточно высокой интенсивности использования коммуникационной сети.,integral_based_conditions.py,inefficient_network_packets,1,2,3,Накладные расходы на передачу MPI сообщений могут быть существенными.,Анализ ввода/вывода (если проблема с сетью для ФС).,io_analysis,"num_nodes > 1 AND NOT thr_low_ib_fs AND (avg_fs_xmit_packets < FS_SMALL_PACKETS OR avg_fs_rcv_packets < FS_SMALL_PACKETS)
"
rule_mpi_high_system,1,Работа с коммуникационнной сетью занимает слишком много системных ресурсов.,integral_based_conditions.py,inefficient_mpi,1,2,3,"Вероятно, работа с MPI сетью или сетью для ФС организована неэффективно.","1) Анализ MPI программ -> Профилировка (если проблема с MPI сетью);
2) Анализ ввода/вывода (если проблема с сетью для ФС).","mpi_profiling,io_analysis",num_nodes > 1 AND thr_low_ib AND thr_high_cpu_system
rule_mpi_bad_locality,1,"Задача активно работает с MPI сетью, но сетевая локальность плохая (узлы СК расположены далеко друг от друга).",integral_based_conditions.py,inefficient_mpi,1,2,3,"При запуске задачи менеджером ресурсов был выбран неудачный набор узлов. Рекомендуется при необходимости явно указывать узлы, на которых будет производиться запуск проргаммы, либо пытаться оптимизировать работу с MPI.",Анализ MPI программ -> Профилировка,mpi_profiling,"num_nodes > 1 AND ((thr_high_ib_mpi OR thr_high_ib_fs) AND NOT thr_low_network_sparsity)
OR (NOT (thr_low_ib_mpi OR thr_low_ib_fs) AND thr_high_network_sparsity)))
"
rule_wrong_partition_gpu,1,"Задача запущена в разделе для GPU задач, однако практически не использует графические процессоры.",integral_based_conditions.py,wrong_partition,1,4,4,Неправильно выбран раздел для задачи.,Рекомендуется сменить раздел.,---,partition in GPU_PARTITIONS AND avg_gpu_load < GPU_LOAD_LOW
rule_wrong_partition_io,1,"Задача запущена в разделе для задач с невысокими требованиям к скорости вовода/вывода, однако в этой задаче интенсивность ввода/вывода велика.",integral_based_conditions.py,wrong_partition,1,4,4,Неправильно выбран раздел для задачи.,Рекомендуется сменить раздел.,---,thr_high_ib_fs AND partition in LOW_IO_PARTITIONS
rule_one_active_process,1,"В даной задаче обнаружен только 1 активный процесс на узел, при этом интенсивность использования памяти, GPU или сети невысока.",integral_based_conditions.py,serial_like_jobs,1,2,3,"Вероятно, при запуске задачи указывается размещение 1 процесса на узел.",Рекомендуется запускать с большим числом процессов на узел.,---,"not tag_comm_data AND NOT thr_high_gpu_load AND (SERIAL_LA_MIN < loadavg.avg < SERIAL_LA_MAX)
AND (NOT thr_high_mem_load AND not thr_high_mem_store)"
rule_mpi_disbalance,1,Большой дислабанс на узлах между средним объемом передаваемых и получаемых данных по MPI сети.,integral_based_conditions.py,incorrect_behavior,1,2,3,"Вероятно, некорректное использование MPI.",Анализ MPI программ -> Профилировка,mpi_profiling,"num_nodes > 1 AND NOT tag_low_ib_mpi
AND (xmit_mpi/recv_data > MPI_DISBALANCE) OR (xmit_mpi/recv_data  < 1.0/MPI_DISBALANCE)"
rule_irq_iowait,1,Слишком высокая IRQ или IOWAIT загрузка.,integral_based_conditions.py,incorrect_behavior,1,2,3,"Вероятно, некорректный режим работы задачи.",Рекомендуется проверить параметры запуска задачи.,---,thr_high_cpu_irq OR thr_high_cpu_iowait
rule_nice,1,Слишком высокая NICE загрузка.,integral_based_conditions.py,incorrect_behavior,1,2,3,Используются процессы с низким приоритетом.,Рекомендуется перезапустить задачу с нормальным приоритетом.,---,thr_high_cpu_nice